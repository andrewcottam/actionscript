<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ToolControl.mxml</title>
<link rel="stylesheet" type="text/css" href="../../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> xmlns:mx=&quot;</span><span class="MXMLString">http://www.adobe.com/2006/mxml</span><span class="MXMLDefault_Text">&quot; xmlns=&quot;</span><span class="MXMLString">wcmc.classes.*</span><span class="MXMLDefault_Text">&quot; creationComplete=&quot;</span><span class="ActionScriptDefault_Text">CreationComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; verticalGap=&quot;</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">4</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">4</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">&quot; mouseOver=&quot;</span><span class="ActionScriptDefault_Text">MouseOver</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; mouseOut=&quot;</span><span class="ActionScriptDefault_Text">MouseOut</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; rollOut=&quot;</span><span class="ActionScriptDefault_Text">RollOut</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; xmlns:components=&quot;</span><span class="MXMLString">wcmc.components.*</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:String</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">imageURL</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">10%</span><span class="MXMLDefault_Text">&quot; verticalAlign=&quot;</span><span class="MXMLString">middle</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Image</span><span class="MXMLDefault_Text"> source=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">imageURL</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; verticalGap=&quot;</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:CheckBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">checkBox</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">toggleTool</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">Label</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; color=&quot;</span><span class="MXMLString">0x444444</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Text</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">toolDescriptionTextArea</span><span class="MXMLDefault_Text">&quot; text=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">Description</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">9</span><span class="MXMLDefault_Text">&quot; color=&quot;</span><span class="MXMLString">0xaaaaaa</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>    
        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text"> right=&quot;</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">&quot; top=&quot;</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Image</span><span class="MXMLDefault_Text"> source=&quot;</span><span class="MXMLString">@Embed(source=&apos;images/info.png&apos;)</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setLegendVisibility</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">legendImage</span><span class="MXMLDefault_Text">&quot; visible=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; showEffect=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">fader</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; hideEffect=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">fader</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Fade</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">fader</span><span class="MXMLDefault_Text">&quot; duration=&quot;</span><span class="MXMLString">250</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
        <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">NewLegend</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">Image</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">geometry</span>.<span class="ActionScriptDefault_Text">Geometry</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">managers</span>.<span class="ActionScriptDefault_Text">CursorManagerPriority</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">managers</span>.<span class="ActionScriptDefault_Text">CursorManager</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">UDACreatedEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">ScribbleOverlayLayer</span>; 
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">Top10MapSymbol</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">EnumMarkerType</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">geometry</span>.<span class="ActionScriptDefault_Text">Multipoint</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">geometry</span>.<span class="ActionScriptDefault_Text">MapPoint</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">Graphic</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">tasks</span>.<span class="ActionScriptDefault_Text">FeatureSet</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">Application</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">binding</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">BindingUtils</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">QueryEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">Alert</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">myMarker</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">google</span>.<span class="ActionScriptDefault_Text">maps</span>.<span class="ActionScriptDefault_Text">LatLng</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">google</span>.<span class="ActionScriptDefault_Text">maps</span>.<span class="ActionScriptDefault_Text">overlays</span>.<span class="ActionScriptDefault_Text">MarkerOptions</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">rpc</span>.<span class="ActionScriptDefault_Text">AsyncResponder</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">ContentBox</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">tasks</span>.<span class="ActionScriptDefault_Text">Query</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">esri</span>.<span class="ActionScriptDefault_Text">ags</span>.<span class="ActionScriptDefault_Text">tasks</span>.<span class="ActionScriptDefault_Text">QueryTask</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">google</span>.<span class="ActionScriptDefault_Text">maps</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IPaneManager</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">google</span>.<span class="ActionScriptDefault_Text">maps</span>.<span class="ActionScriptDefault_Text">Map3D</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">google</span>.<span class="ActionScriptDefault_Text">maps</span>.<span class="ActionScriptDefault_Text">interfaces</span>.<span class="ActionScriptDefault_Text">IPane</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">List</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">Tool</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">wcmc</span>.<span class="ActionScriptDefault_Text">classes</span>.<span class="ActionScriptDefault_Text">ToolClickedEvent</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">Label</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">Description</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Map3D</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">showZeroAbundance</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">toolWindow</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scribbleLayer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ScribbleOverlayLayer</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">displayObjectsVisible</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">totalAbundance</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">totalAbundanceProtected</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/distribution.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">distributionMapIcon</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/distributionGone.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">distributionGone</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/distributionZero.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">distributionZeroIcon</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/small.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">small</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/medium.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">medium</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/large.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">large</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/red.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">red</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/green.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">green</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
               <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/yellow.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">yellow</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;/images/draw.png&quot;</span><span class="ActionScriptBracket/Brace">)]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">draw</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">top10Index</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pane</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPane</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dataLoaded</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">infoBox</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classValues</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>; <span class="ActionScriptComment">//holds the class values for abundance renderers, e.g. 0-10, 10-50, 50-2500
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parameter</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">UDAGeometry</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Geometry</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">markers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tooltipField</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">distanceToPAField</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">url</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">returnFields</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">markerType</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>; 
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cursorType</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;  
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">serviceType</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">displayObjects</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">CreationComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">pane</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">createPane</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">BindingUtils</span>.<span class="ActionScriptDefault_Text">bindSetter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reset</span>,<span class="ActionScriptDefault_Text">Application</span>.<span class="ActionScriptDefault_Text">application</span>,<span class="ActionScriptString">&quot;currentParameter&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">markerType</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">SEALEVELRISE</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">infoBox</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">seaLevelRiseInfo</span><span class="ActionScriptBracket/Brace">()</span>;
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">infoBox</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">seaLevelRiseInfo</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">tool</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">this</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">infoBox</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Legend</span><span class="ActionScriptBracket/Brace">()</span>;
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">infoBox</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Legend</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">tool</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">this</span>;
                        <span class="ActionScriptReserved">break</span>;    
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">Application</span>.<span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">infoBox</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createPane</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPane</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapPaneManager</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPaneManager</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">getPaneManager</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">mapPaneManager</span>.<span class="ActionScriptDefault_Text">createPane</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapPaneManager</span>.<span class="ActionScriptDefault_Text">paneCount</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//create the new pane at the top of the pane stack
</span>            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">toggleTool</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">checkBox</span>.<span class="ActionScriptDefault_Text">selected</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">switchToolOn</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">switchToolOff</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">switchToolOff</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scribbleLayer</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">finaliseScribbleLayer</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">displayObjectsVisible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">switchToolOn</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scribbleLayer</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">initialiseScribbleLayer</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">switchLayerOn</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptComment">//if the tool has a scribble layer then the user will need to create a UDA before loading any data
</span>            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">switchLayerOn</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">dataLoaded</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">loadData</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">displayObjectsVisible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>; <span class="ActionScriptComment">//turn display objects on straight away if the data is already loaded
</span>            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadData</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;StartDataLoad&quot;</span>,<span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">))</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">totalAbundance</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptComment">//reset the total abundance count - sometimes a load might result in no markers, e.g. UDA query
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">distanceToPAField</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">totalAbundanceProtected</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptComment">//reset the total abundance protected count - sometimes a load might result in no markers, e.g. UDA query
</span>                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">serviceType</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">&quot;wfs&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">loadWFSData</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">loadMapServiceData</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadMapServiceData</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_queryTask</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">QueryTask</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">QueryTask</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">query</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Query</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Query</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">whereClause</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">showZeroAbundance</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">whereClause</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;&gt;=0&quot;</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">whereClause</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;&gt;=1&quot;</span>;
                <span class="ActionScriptDefault_Text">query</span>.<span class="ActionScriptDefault_Text">where</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">parameter</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">whereClause</span>; <span class="ActionScriptComment">//bit of a hack
</span>                <span class="ActionScriptDefault_Text">query</span>.<span class="ActionScriptDefault_Text">outFields</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">returnFields</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">query</span>.<span class="ActionScriptDefault_Text">returnGeometry</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">UDAGeometry</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">query</span>.<span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">UDAGeometry</span>;
                    <span class="ActionScriptDefault_Text">query</span>.<span class="ActionScriptDefault_Text">spatialRelationship</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;esriSpatialRelIntersects&quot;</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">_queryTask</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">QueryEvent</span>.<span class="ActionScriptDefault_Text">EXECUTE_COMPLETE</span>,<span class="ActionScriptDefault_Text">queryComplete</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_queryTask</span>.<span class="ActionScriptDefault_Text">execute</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">query</span>,<span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AsyncResponder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">createMarkers</span>,<span class="ActionScriptDefault_Text">onFault</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadWFSData</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">loader</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">URLLoader</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">URLLoader</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptComment">//instantiate a new url loader to get the wfs data from axiom 
</span>                <span class="ActionScriptDefault_Text">loader</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Event</span>.<span class="ActionScriptDefault_Text">COMPLETE</span>, <span class="ActionScriptDefault_Text">onWfsLoaded</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//add a callback function for when the data is loaded
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">urlRequest</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;&apos;&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">parameter</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;&apos;&quot;</span>; 
                <span class="ActionScriptDefault_Text">loader</span>.<span class="ActionScriptDefault_Text">load</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">URLRequest</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">urlRequest</span><span class="ActionScriptBracket/Brace">))</span>;  <span class="ActionScriptComment">//load the data
</span>            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">queryComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">QueryEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">target</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">QueryTask</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">QueryEvent</span>.<span class="ActionScriptDefault_Text">EXECUTE_COMPLETE</span>,<span class="ActionScriptDefault_Text">queryComplete</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">dataLoadComplete</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onWfsLoaded</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> 
            <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_XML</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XML</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">target</span>.<span class="ActionScriptDefault_Text">data</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//build an xml object with the returned gml data
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_axiomNS</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Namespace</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Namespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;axiom&quot;</span>, <span class="ActionScriptString">&quot;http://maps.axiomalaska.com&quot;</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//add in all of the necessary namespace declarations to be able to query and work with the gml
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_ogcNS</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Namespace</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Namespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;ogc&quot;</span>, <span class="ActionScriptString">&quot;http://www.opengis.net/ogc&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_gmlNS</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Namespace</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Namespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;gml&quot;</span>, <span class="ActionScriptString">&quot;http://www.opengis.net/gml&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_owsNS</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Namespace</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Namespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;ows&quot;</span>, <span class="ActionScriptString">&quot;http://www.opengis.net/ows&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_wfsNS</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Namespace</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Namespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;wfs&quot;</span>, <span class="ActionScriptString">&quot;http://www.opengis.net/wfs&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_XML</span>.<span class="ActionScriptDefault_Text">addNamespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_axiomNS</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_XML</span>.<span class="ActionScriptDefault_Text">addNamespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_ogcNS</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_XML</span>.<span class="ActionScriptDefault_Text">addNamespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_gmlNS</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_XML</span>.<span class="ActionScriptDefault_Text">addNamespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_owsNS</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_XML</span>.<span class="ActionScriptDefault_Text">addNamespace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_wfsNS</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_XMLList</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">_XML</span>..<span class="ActionScriptDefault_Text">_gmlNS</span><span class="ActionScriptOperator">::</span><span class="ActionScriptDefault_Text">pos</span>; <span class="ActionScriptComment">//get tll of the &lt;gml:pos&gt; elements from the gml 
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pointString</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_dateBegin</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_productivityName</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">_XMLList</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">//iterate through all of the &lt;gml:pos&gt; elements to create all of the points for the species productivity data
</span>                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">pointString</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptComment">//convert the pos to a string
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_record</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">item</span>.<span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">()</span>.<span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">()</span>.<span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptComment">//get the record that the pos is part of, i.e. the productivity record
</span>                    <span class="ActionScriptDefault_Text">_dateBegin</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_record</span>.<span class="ActionScriptDefault_Text">_axiomNS</span><span class="ActionScriptOperator">::</span><span class="ActionScriptDefault_Text">DateBegin</span>; <span class="ActionScriptComment">//get the &lt;axiom:DateBegin&gt; element
</span>                    <span class="ActionScriptDefault_Text">_productivityName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_record</span>.<span class="ActionScriptDefault_Text">_axiomNS</span><span class="ActionScriptOperator">::</span><span class="ActionScriptDefault_Text">ProductivityName</span>; <span class="ActionScriptComment">//get the &lt;axiom:ProductivityName&gt; element
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pointArray</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">pointString</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot; &quot;</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//split the point string to get the lat and long
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">latLng</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">LatLng</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">LatLng</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">pointArray</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>,<span class="ActionScriptDefault_Text">pointArray</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">])</span>;  <span class="ActionScriptComment">//create a lat/lng from the pos data
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_markerOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MarkerOptions</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">MarkerOptions</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">hasShadow</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">=</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">Productivity</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">_productivityName</span><span class="ActionScriptBracket/Brace">}</span>;
                    <span class="ActionScriptDefault_Text">setIcon</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_markerOptions</span>,<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">tooltip</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">_dateBegin</span>; <span class="ActionScriptComment">//set the tooltip for the marker to be the begin date
</span>                    <span class="ActionScriptDefault_Text">addMarkerToMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">latLng</span>.<span class="ActionScriptDefault_Text">lat</span><span class="ActionScriptBracket/Brace">()</span>,<span class="ActionScriptDefault_Text">latLng</span>.<span class="ActionScriptDefault_Text">lng</span><span class="ActionScriptBracket/Brace">()</span>,<span class="ActionScriptDefault_Text">_markerOptions</span>,<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//add the marker to the map
</span>                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">dataLoadComplete</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dataLoadComplete</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">dataLoaded</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">displayObjectsVisible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;EndDataLoad&quot;</span>,<span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addMarkerToMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_Lat</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>,<span class="ActionScriptDefault_Text">_Lng</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>,<span class="ActionScriptDefault_Text">_MarkerOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MarkerOptions</span>,<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_marker</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">myMarker</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">myMarker</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">LatLng</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_Lat</span>,<span class="ActionScriptDefault_Text">_Lng</span><span class="ActionScriptBracket/Brace">)</span>,<span class="ActionScriptDefault_Text">_MarkerOptions</span><span class="ActionScriptBracket/Brace">)</span>; 
                <span class="ActionScriptDefault_Text">_marker</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">attributes</span>;
                <span class="ActionScriptDefault_Text">_marker</span>.<span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">abundanceField</span>;
                <span class="ActionScriptDefault_Text">BindingUtils</span>.<span class="ActionScriptDefault_Text">bindProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_marker</span>,<span class="ActionScriptString">&quot;visible&quot;</span>,<span class="ActionScriptDefault_Text">checkBox</span>,<span class="ActionScriptString">&quot;selected&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">markers</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_marker</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">pane</span>.<span class="ActionScriptDefault_Text">addOverlay</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_marker</span><span class="ActionScriptBracket/Brace">)</span>; 
            <span class="ActionScriptBracket/Brace">}</span>    
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onFault</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">info</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>,<span class="ActionScriptDefault_Text">token</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">info</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;
                <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;EndDataLoad&quot;</span>,<span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_parameter</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_parameter</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">parameter</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">_parameter</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_parameter</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">&lt;</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">parameter</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;ALTE&quot;</span>;
                <span class="ActionScriptDefault_Text">checkBox</span>.<span class="ActionScriptDefault_Text">selected</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">dataLoaded</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">displayObjectsVisible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>; 
                <span class="ActionScriptDefault_Text">clearMarkers</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scribbleLayer</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">finaliseScribbleLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clearMarkers</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_marker</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">myMarker</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">markers</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_marker</span>.<span class="ActionScriptDefault_Text">changeWatcher</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">_marker</span>.<span class="ActionScriptDefault_Text">removeWatcher</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">removeOverlay</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_marker</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">markers</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addDisplayObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_displayObject</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">present</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_do</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">displayObjects</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_do</span><span class="ActionScriptOperator">===</span><span class="ActionScriptDefault_Text">_displayObject</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">present</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span> 
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">present</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">displayObjects</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_displayObject</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">BindingUtils</span>.<span class="ActionScriptDefault_Text">bindProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_displayObject</span>,<span class="ActionScriptString">&quot;visible&quot;</span>,<span class="ActionScriptReserved">this</span>,<span class="ActionScriptString">&quot;displayObjectsVisible&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createMarkers</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureSet</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FeatureSet</span>,<span class="ActionScriptDefault_Text">token</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">features</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">getFeatures</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureSet</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//get the relevant features to create
</span>                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">myGraphic</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphic</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">features</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">//iterate through the returned data 
</span>                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">myPoint</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MapPoint</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">Multipoint</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">myPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">MapPoint</span><span class="ActionScriptBracket/Brace">((</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Multipoint</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">points</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">])</span>; <span class="ActionScriptComment">//create a point to add the marker
</span>                    <span class="ActionScriptBracket/Brace">}</span> 
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">myPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">MapPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_markerOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MarkerOptions</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">MarkerOptions</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">hasShadow</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">setIcon</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_markerOptions</span>,<span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">iconAlignment</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">MarkerOptions</span>.<span class="ActionScriptDefault_Text">ALIGN_HORIZONTAL_CENTER</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">MarkerOptions</span>.<span class="ActionScriptDefault_Text">ALIGN_VERTICAL_CENTER</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">tooltipField</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">tooltip</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">tooltipField</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">addMarkerToMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">myPoint</span>.<span class="ActionScriptDefault_Text">y</span>,<span class="ActionScriptDefault_Text">myPoint</span>.<span class="ActionScriptDefault_Text">x</span>,<span class="ActionScriptDefault_Text">_markerOptions</span>,<span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//add the marker to the distribution map
</span>                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">abundance</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">abundance</span><span class="ActionScriptOperator">!=</span> 0.0001<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">totalAbundance</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">abundance</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">distanceToPAField</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">distanceToPA</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">myGraphic</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">distanceToPAField</span><span class="ActionScriptBracket/Brace">]</span>;
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">distanceToPA</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">totalAbundanceProtected</span><span class="ActionScriptOperator">+=</span><span class="ActionScriptDefault_Text">abundance</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>   
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getFeatures</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureSet</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FeatureSet</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">features</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">markerType</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">ABUNDANCE</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">features</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">featureSet</span>.<span class="ActionScriptDefault_Text">features</span>;
                        <span class="ActionScriptDefault_Text">buildAbundanceClasses</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureSet</span>.<span class="ActionScriptDefault_Text">features</span>,3<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">TOP10</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">Top10Features</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">sortFeaturesByAbundance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureSet</span>.<span class="ActionScriptDefault_Text">features</span>,<span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">features</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">Top10Features</span>.<span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span>0,10<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">top10Index</span><span class="ActionScriptOperator">=</span>1;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">features</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">featureSet</span>.<span class="ActionScriptDefault_Text">features</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">features</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setIcon</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_markerOptions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MarkerOptions</span>,<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">markerType</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">DISTRIBUTION</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">distributionZeroIcon</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">distributionMapIcon</span><span class="ActionScriptBracket/Brace">()</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">ABUNDANCE_UDA</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">large</span><span class="ActionScriptBracket/Brace">()</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">ABUNDANCE</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classNum</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0;<span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">classValues</span>.<span class="ActionScriptDefault_Text">length</span>;<span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">&gt;</span><span class="ActionScriptDefault_Text">classValues</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">])</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">classNum</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">i</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">classNum</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">case</span> 0<span class="ActionScriptOperator">:</span> 
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">small</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                            <span class="ActionScriptReserved">case</span> 1<span class="ActionScriptOperator">:</span> 
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">medium</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                            <span class="ActionScriptReserved">case</span> 2<span class="ActionScriptOperator">:</span> 
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">large</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">TOP10</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Top10MapSymbol</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">top10Index</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>,0.7<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">top10Index</span><span class="ActionScriptOperator">++</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">PRODUCTIVITY</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">attributes</span>.<span class="ActionScriptDefault_Text">Productivity</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">//set the marker style depending on the productivity
</span>                            <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;Failed&quot;</span><span class="ActionScriptOperator">:</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">red</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;Good&quot;</span><span class="ActionScriptOperator">:</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">green</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;Normal&quot;</span><span class="ActionScriptOperator">:</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">yellow</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EnumMarkerType</span>.<span class="ActionScriptDefault_Text">PROTECTION</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">attributes</span>.<span class="ActionScriptDefault_Text">DistanceTo</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">//set the marker style depending on the productivity
</span>                            <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">case</span> 0<span class="ActionScriptOperator">:</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">green</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">:</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">red</span><span class="ActionScriptBracket/Brace">()</span>;
                                <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">default</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_markerOptions</span>.<span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">distributionMapIcon</span><span class="ActionScriptBracket/Brace">()</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">buildAbundanceClasses</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">objects</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">numClasses</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">classValues</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">numClasses</span><span class="ActionScriptOperator">&gt;</span>2<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sobjects</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">sortFeaturesByAbundance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">objects</span>,<span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">ceil</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sobjects</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">/</span>3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">classValues</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">classValues</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sobjects</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">gap</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>;
                    <span class="ActionScriptDefault_Text">classValues</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sobjects</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">gap</span><span class="ActionScriptOperator">*</span>2<span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>;
                    <span class="ActionScriptDefault_Text">classValues</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sobjects</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">sobjects</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>        
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">sortFeaturesByAbundance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">objects</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">ascending</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sobjects</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ascending</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">sobjects</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">objects</span>.<span class="ActionScriptDefault_Text">sort</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>,<span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> 
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">b</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>
                            <span class="ActionScriptReserved">return</span> <span class="ActionScriptOperator">-</span>1;
                        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">b</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>
                            <span class="ActionScriptReserved">return</span> 1;
                        <span class="ActionScriptReserved">else</span>
                            <span class="ActionScriptReserved">return</span> 0;
                    <span class="ActionScriptBracket/Brace">})</span>;
               <span class="ActionScriptBracket/Brace">}</span>
               <span class="ActionScriptReserved">else</span>
               <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">sobjects</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">objects</span>.<span class="ActionScriptDefault_Text">sort</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>,<span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> 
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">b</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>
                            <span class="ActionScriptReserved">return</span> 1;
                        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">b</span>.<span class="ActionScriptDefault_Text">attributes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">abundanceField</span><span class="ActionScriptBracket/Brace">])</span>
                            <span class="ActionScriptReserved">return</span> <span class="ActionScriptOperator">-</span>1;
                        <span class="ActionScriptReserved">else</span>
                            <span class="ActionScriptReserved">return</span> 0;
                    <span class="ActionScriptBracket/Brace">})</span>;
               <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">sobjects</span>;
            <span class="ActionScriptBracket/Brace">}</span>  
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initialiseScribbleLayer</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">CursorManager</span>.<span class="ActionScriptDefault_Text">setCursor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">draw</span>, <span class="ActionScriptDefault_Text">CursorManagerPriority</span>.<span class="ActionScriptDefault_Text">HIGH</span>, 3, 2<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">initialise</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">drawMode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;Freehand&quot;</span>;
                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;UDACreated&quot;</span>,<span class="ActionScriptDefault_Text">UDACreated</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//wire up an event to use the UDA to query the features on ArcGIS Server
</span>                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;StartUDADraw&quot;</span>,<span class="ActionScriptDefault_Text">startUDADraw</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">finaliseScribbleLayer</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">CursorManager</span>.<span class="ActionScriptDefault_Text">removeAllCursors</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">finalise</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;UDACreated&quot;</span>,<span class="ActionScriptDefault_Text">UDACreated</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">//wire up an event to use the UDA to query the features on ArcGIS Server
</span>                <span class="ActionScriptDefault_Text">scribbleLayer</span>.<span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;StartUDADraw&quot;</span>,<span class="ActionScriptDefault_Text">startUDADraw</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">UDAGeometry</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptDefault_Text">clearMarkers</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">startUDADraw</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">clearMarkers</span><span class="ActionScriptBracket/Brace">()</span>;    
                <span class="ActionScriptDefault_Text">dataLoaded</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;        
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">UDACreated</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UDACreatedEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">UDAGeometry</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">geometry</span>;
                <span class="ActionScriptDefault_Text">switchLayerOn</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">MouseOver</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">setStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;backgroundColor&apos;</span>,<span class="ActionScriptString">&apos;0xb2e1ff&apos;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">legendImage</span>.<span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">MouseOut</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">setStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;backgroundColor&apos;</span>,<span class="ActionScriptString">&apos;0xffffff&apos;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">RollOut</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">legendImage</span>.<span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">infoBox</span>.<span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setLegendVisibility</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">infoBox</span>.<span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=!</span><span class="ActionScriptDefault_Text">infoBox</span>.<span class="ActionScriptDefault_Text">visible</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
<span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span></pre></body>
</html>
